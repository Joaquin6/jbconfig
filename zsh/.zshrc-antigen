export ZSH=$HOME/.oh-my-zsh

# export ZSH_THEME="spaceship"
export ZSH_THEME="powerlevel9k/powerlevel9k"
export ZSH_CUSTOM=$ZSH/custom
export ANTIGEN_BUNDLES=$ADOTDIR/bundles

handle-add-path $ADOTDIR

export ZSH_PLUGINS_ALIAS_TIPS_TEXT="Alias tip: "
export PROMPT_COMMAND="${PROMPT_COMMAND:+$PROMPT_COMMAND ;} history -a"

export POWERLEVEL9K_PROMPT_ON_NEWLINE=true
export POWERLEVEL9K_RPROMPT_ON_NEWLINE=true
export POWERLEVEL9K_MODE='awesome-fontconfig'
export POWERLEVEL9K_MULTILINE_FIRST_PROMPT_PREFIX="↱"
export POWERLEVEL9K_MULTILINE_LAST_PROMPT_PREFIX="↳ "
export POWERLEVEL9K_INSTALLATION_PATH=$ZSH_CUSTOM/themes/spaceship-prompt
export POWERLEVEL9K_TIME_FORMAT="%D{%H:%M:%S \uE868  %d.%m.%y}"

source $ADOTDIR/antigen.zsh
source $POWERLEVEL9K_INSTALLATION_PATH/spaceship.zsh-theme

COMPLETION_WAITING_DOTS="true"

antigen use oh-my-zsh

antigen bundles <<EOBUNDLES
	battery
	command-not-found
	dotenv
	history
	history-substring-search
	kubectl
	sudo
	gpg-agent
	ssh-agent
	jsontools
	profiles
	git
	git-auto-fetch
	npx
	golang
	yarn
	gnu-utils
	cygwin
	brew
	gem
	debian
	systemd
	systemadmin
	cask
	aws
	redis-cli
	pep8
	nomad
	docker
	docker-compose
	docker-machine
EOBUNDLES

if [[ $TILIX_ID ]]; then
    source /etc/profile.d/vte.sh
fi

# OS Based Plugins
if [[ "$OSTYPE" == darwin* ]]; then
 	antigen bundle iterm2
	antigen bundle osx
	antigen bundle colorize
fi

if [ -d $LINUXBREW_PATH ]; then
	handle-add-path $LINUXBREW_LOCAL_BIN
	handle-add-path $LINUXBREW_LOCAL_OPT/go/libexec/bin
fi

# Syntax highlighting bundle.
antigen bundle Joaquin6/zsh-url-highlighter
antigen bundle Joaquin6/zsh-history-substring-search   # https://github.com/zsh-users/zsh-history-substring-search
antigen bundle Joaquin6/zsh-autosuggestions            # https://github.com/zsh-users/zsh-autosuggestions
antigen bundle Joaquin6/zsh-completions
antigen bundle Joaquin6/zsh-syntax-highlighting    # https://github.com/zsh-users/zsh-syntax-highlighting
antigen bundle Joaquin6/alias-tips                      # https://github.com/Joaquin6/alias-tips
antigen bundle Joaquin6/zshmarks                   		# https://github.com/Joaquin6/zshmarks
antigen bundle Joaquin6/git-aliases                     # https://github.com/Joaquin6/git-aliases
antigen bundle Joaquin6/autoenv              			# https://github.com/Joaquin6/autoenv
antigen bundle Joaquin6/powerlevel9k 					# https://github.com/Joaquin6/powerlevel9k
antigen bundle Joaquin6/spaceship-prompt
antigen bundle psprint/zsh-cmd-architect

# Suuply the theme
antigen theme spaceship
# Tell antigen that you're done.
antigen apply

source $JB_ZSH_BASE/zsh/.zaliases
source $JB_ZSH_BASE/zsh/functions.zsh

# place this after nvm initialization!
autoload -U add-zsh-hook

add-zsh-hook chpwd load-user-specifics
add-zsh-hook chpwd load-nvmrc

load-nvmrc
load-user-specifics

# User configuration

# Theme configuration
typeset -gA ZSH_HIGHLIGHT_STYLES

# Spaceship Prompt Options -  https://github.com/denysdovhan/spaceship-prompt/blob/master/docs/Options.md
export SPACESHIP_PROMPT_ORDER=(
  user          # Username section
  dir           # Current directory section
  host          # Hostname section
  git           # Git section (git_branch + git_status)
  package       # Package version
  node          # Node.js section
  ruby          # Ruby section
  golang        # Go section
  php           # PHP section
  docker        # Docker section
  aws           # Amazon Web Services section
  venv          # virtualenv section
  pyenv         # Pyenv section
  exec_time     # Execution time
  line_sep      # Line break
  jobs          # Background jobs indicator
  exit_code     # Exit code section
  char          # Prompt character
)
export SPACESHIP_RPROMPT_ORDER=(
	time          # Time stampts section
	battery       # Battery level and status
)
export SPACESHIP_TIME_SHOW=true
export SPACESHIP_TIME_12HR=true

# All options must be overridden in your .zshrc file after the theme.
ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets pattern url)
ZSH_HIGHLIGHT_URL_HIGHLIGHTER_TIMEOUT=4
ZSH_HIGHLIGHT_STYLES[url-good]='fg=blue,bold'
ZSH_HIGHLIGHT_STYLES[url-bad]='fg=magenta,bold'
# Customise autosuggestion color
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=green,bold'
